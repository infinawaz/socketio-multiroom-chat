<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
    integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
  <link rel="stylesheet" href="css/style.css" />
  <title>Raabta App</title>
</head>

<body>
  <div class="join-container">
    <header class="join-header">
      <h1><i class="fas fa-smile"></i> Raabta</h1>
      <p style="color: var(--text-secondary);">Connect with friends in real-time rooms</p>
    </header>
    <main class="join-main">
      <form action="chat.html">
        <div class="form-control">
          <label for="username">Username</label>
          <input type="text" name="username" id="username" placeholder="Enter username..." required />
        </div>
        <div class="form-control">
          <label for="room">
            Room
            <span id="room-mode-toggle" class="room-mode-btn" title="Type custom name"
              style="cursor: pointer; margin-left:10px; font-size: 0.8em; color: var(--primary-color);">
              <i class="fas fa-pen"></i> Edit
            </span>
          </label>

          <!-- Default Dropdown -->
          <select name="room" id="room-select">
            <option value="Lounge">Lounge</option>
            <option value="Showcase">Showcase</option>
            <option value="Gaming">Gaming</option>
          </select>

          <!-- Custom Input (Hidden by default) -->
          <input type="text" id="room-input" placeholder="Enter room name..." style="display: none;" disabled />
        </div>
        <button type="submit" class="btn">Join Chat</button>
      </form>
    </main>
  </div>

  <script>
    const toggleBtn = document.getElementById('room-mode-toggle');
    const roomSelect = document.getElementById('room-select');
    const roomInput = document.getElementById('room-input');
    let isCustom = false;

    toggleBtn.addEventListener('click', () => {
      isCustom = !isCustom;

      if (isCustom) {
        // Switch to Input
        roomSelect.style.display = 'none';
        roomSelect.removeAttribute('name'); // Remove name so it's not submitted
        roomSelect.disabled = true;

        roomInput.style.display = 'block';
        roomInput.setAttribute('name', 'room'); // Add name so THIS is submitted
        roomInput.disabled = false;
        roomInput.focus();

        toggleBtn.innerHTML = '<i class="fas fa-list"></i> List';
      } else {
        // Switch back to Select
        roomInput.style.display = 'none';
        roomInput.removeAttribute('name');
        roomInput.disabled = true;

        roomSelect.style.display = 'block';
        roomSelect.setAttribute('name', 'room');
        roomSelect.disabled = false;

        toggleBtn.innerHTML = '<i class="fas fa-pen"></i> Edit';
      }
    });
  </script>
</body>

</html>